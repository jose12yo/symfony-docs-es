
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Cómo organizar el envío de correo electrónico &mdash; Manual de Symfony2 en Español</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="top" title="Manual de Symfony2 en Español" href="../../index.html" />
    <link rel="up" title="Recetario" href="../index.html" />
    <link rel="next" title="Cómo simular autenticación HTTP en una prueba funcional" href="../testing/http_authentication.html" />
    <link rel="prev" title="Cómo trabajar con correos electrónicos durante el desarrollo" href="dev_environment.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../testing/http_authentication.html" title="Cómo simular autenticación HTTP en una prueba funcional"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="dev_environment.html" title="Cómo trabajar con correos electrónicos durante el desarrollo"
             accesskey="P">anterior</a> |</li>
        <li><a href="../../index.html">Symfony2</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Recetario</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="como-organizar-el-envio-de-correo-electronico">
<h1>Cómo organizar el envío de correo electrónico<a class="headerlink" href="#como-organizar-el-envio-de-correo-electronico" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Cuando estás utilizando el <tt class="docutils literal"><span class="pre">SwiftmailerBundle</span></tt> para enviar correo electrónico desde una aplicación <em>Symfony2</em>, de manera predeterminada el mensaje será enviado inmediatamente. Sin embargo, posiblemente quieras evitar el impacto en el rendimiento de la comunicación entre <tt class="docutils literal"><span class="pre">SwiftMailer</span></tt> y el transporte de correo electrónico, lo cual podría hacer que el usuario tuviera que esperar la carga de la siguiente página, mientras que se envía el correo electrónico. Puedes evitar todo esto eligiendo <tt class="docutils literal"><span class="pre">&quot;spool&quot;</span></tt>, para formar los correos en la cola en lugar de enviarlos directamente. Esto significa que <tt class="docutils literal"><span class="pre">SwiftMailer</span></tt> no intenta enviar el correo electrónico, sino que guardará el mensaje en alguna parte, tal como un archivo. Otro proceso puede leer de la cola y hacerse cargo de enviar los correos que están organizados en la cola. Actualmente, con <tt class="docutils literal"><span class="pre">SwiftMailer</span></tt> sólo es compatible la cola en archivo.</p>
<p>Para utilizar la cola, usa la siguiente configuración:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">swiftmailer</span><span class="p-Indicator">:</span>
    <span class="c1"># ...</span>
    <span class="l-Scalar-Plain">spool</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">file</span>
        <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/ruta/a/spool</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>

<span class="c">&lt;!--</span>
<span class="c">xmlns:swiftmailer=&quot;http://symfony.com/schema/dic/swiftmailer&quot;</span>
<span class="c">http://symfony.com/schema/dic/swiftmailer http://symfony.com/schema/dic/swiftmailer/swiftmailer-1.0.xsd</span>
<span class="c">--&gt;</span>

<span class="nt">&lt;swiftmailer:config&gt;</span>
     <span class="nt">&lt;swiftmailer:spool</span>
         <span class="na">type=</span><span class="s">&quot;file&quot;</span>
         <span class="na">path=</span><span class="s">&quot;/ruta/a/spool&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/swiftmailer:config&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// app/config/config.php</span>
<span class="x">$container-&gt;loadFromExtension(&#39;swiftmailer&#39;, array(</span>
<span class="x">     // ...</span>
<span class="x">    &#39;spool&#39; =&gt; array(</span>
<span class="x">        &#39;type&#39; =&gt; &#39;file&#39;,</span>
<span class="x">        &#39;path&#39; =&gt; &#39;/ruta/a/spool&#39;,</span>
<span class="x">    )</span>
<span class="x">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>Si deseas almacenar la cola de correo en algún lugar en el directorio de tu proyecto, recuerda que puedes utilizar el parámetro <tt class="docutils literal"><span class="pre">%kernel.root_dir%</span></tt> para referirte a la raíz del proyecto:</p>
<div class="last highlight-yaml"><pre>path: %kernel.root_dir%/spool</pre>
</div>
</div>
<p>Ahora, cuando tu aplicación envía un correo electrónico, no se enviará realmente, sino que se añade a la cola de correo. El envío de los mensajes desde la cola se hace por separado.
Hay una orden de consola para enviar los mensajes en la cola de correo:</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console swiftmailer:spool:send
</pre></div>
</div>
<p>Tiene una opción para limitar el número de mensajes que se enviarán:</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console swiftmailer:spool:send --message-limit<span class="o">=</span>10
</pre></div>
</div>
<p>También puedes establecer el límite de tiempo en segundos:</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console swiftmailer:spool:send --time-limit<span class="o">=</span>10
</pre></div>
</div>
<p>Por supuesto que en realidad no deseas ejecutar esto manualmente. En cambio, la orden de consola se debe activar por un trabajo cronometrado o tarea programada y ejecutarse a intervalos regulares.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Tema anterior</h4>
  <p class="topless"><a href="dev_environment.html"
                        title="Capítulo anterior">Cómo trabajar con correos electrónicos durante el desarrollo</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="../testing/http_authentication.html"
                        title="Próximo capítulo">Cómo simular autenticación <em>HTTP</em> en una prueba funcional</a></p>
<div id="searchbox" style="display: none">
  <h3>Búsqueda rápida</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Ir a" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="../testing/http_authentication.html" title="Cómo simular autenticación HTTP en una prueba funcional"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="dev_environment.html" title="Cómo trabajar con correos electrónicos durante el desarrollo"
             >anterior</a> |</li>
        <li><a href="../../index.html">Symfony2</a> &raquo;</li>
          <li><a href="../index.html" >Recetario</a> &raquo;</li> 
      </ul>
    </div>
   <div id="disqus_thread"></div>
   
    <div class="footer">
        &copy; Copyright 2011, Traducido por Nacho Pacheco.
      Actualizado por última vez en Dec 05, 2011.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
   <script type="text/javascript"> 
    var disqus_shortname = 'documentos-mx';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
   </script> 
   <noscript>
     Por favor activa JavaScript para ver los <a href="http://disqus.com/?ref_noscript">comentarios accionados por Disqus.</a>
   </noscript>

  </body>
</html>