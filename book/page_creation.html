
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Creando páginas en Symfony2 &mdash; Manual de Symfony2 en Español</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="top" title="Manual de Symfony2 en Español" href="../index.html" />
    <link rel="up" title="Libro" href="index.html" />
    <link rel="next" title="Controlador" href="controller.html" />
    <link rel="prev" title="Instalando y configurando Symfony" href="installation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="controller.html" title="Controlador"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Instalando y configurando Symfony"
             accesskey="P">anterior</a> |</li>
        <li><a href="../index.html">Symfony2</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Libro</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="creando-paginas-en-symfony2">
<span id="index-0"></span><h1>Creando páginas en <em>Symfony2</em><a class="headerlink" href="#creando-paginas-en-symfony2" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Crear una nueva página en <em>Symfony2</em> es un sencillo proceso de dos pasos:</p>
<ul class="simple">
<li><em>Crea una ruta</em>:  Una ruta define la <em>URL</em> de tu página (por ejemplo <tt class="docutils literal"><span class="pre">/sobre</span></tt>) y especifica un controlador (el cual es una función <em>PHP</em>) que <em>Symfony2</em> debe ejecutar cuando la <em>URL</em> de una petición entrante coincida con el patrón de la ruta;</li>
<li><em>Crea un controlador</em>: Un controlador es una función <em>PHP</em> que toma la petición entrante y la transforma en el objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> de <em>Symfony2</em> que es devuelto al usuario.</li>
</ul>
<p>Nos encanta este enfoque simple porque coincide con la forma en que funciona la <em>Web</em>.
Cada interacción en la <em>Web</em> se inicia con una petición <em>HTTP</em>. El trabajo de la aplicación simplemente es interpretar la petición y devolver la respuesta <em>HTTP</em> adecuada.</p>
<p><em>Symfony2</em> sigue esta filosofía y te proporciona las herramientas y convenios para mantener organizada tu aplicación a medida que crece en usuarios y complejidad.</p>
<p>¿Suena bastante simple? ¡Démonos una zambullida!</p>
<div class="section" id="la-pagina-hola-symfony">
<span id="index-1"></span><h2>La página &#8220;¡Hola <em>Symfony</em>!&#8221;<a class="headerlink" href="#la-pagina-hola-symfony" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Vamos a empezar con una aplicación derivada del clásico &#8220;¡Hola Mundo!&#8221;. Cuando hayamos terminado, el usuario podrá recibir un saludo personal (por ejemplo, &#8220;Hola <em>Symfony</em>&#8221;) al ir a la siguiente <em>URL</em>:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app_dev.php/hello/Symfony
</pre></div>
</div>
<p>En realidad, serás capaz de sustituir <tt class="docutils literal"><span class="pre">Symfony</span></tt> con cualquier otro nombre al cual darle la bienvenida. Para crear la página, sigue el simple proceso de dos pasos.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">La guía asume que ya has descargado <em>Symfony2</em> y configurado tu servidor web. En la <em>URL</em> anterior se supone que <tt class="docutils literal"><span class="pre">localhost</span></tt> apunta al directorio <tt class="docutils literal"><span class="pre">web</span></tt>, de tu nuevo proyecto <em>Symfony2</em>. Para información más detallada sobre este proceso, consulta <a class="reference internal" href="installation.html"><em>Instalando Symfony2</em></a>.</p>
</div>
<div class="section" id="antes-de-empezar-crea-el-paquete">
<h3>Antes de empezar: Crea el paquete<a class="headerlink" href="#antes-de-empezar-crea-el-paquete" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Antes de empezar, tendrás que crear un <tt class="docutils literal"><span class="pre">bundle</span></tt> (<em>paquete</em> en adelante). En <em>Symfony2</em>, un <a class="reference internal" href="../glossary.html#term-paquete"><em class="xref std std-term">paquete</em></a> es como un complemento (o plugin, para los puristas), salvo que todo el código de tu aplicación debe vivir dentro de un paquete.</p>
<p>Un paquete no es más que un directorio que alberga todo lo relacionado con una función específica, incluyendo clases <em>PHP</em>, configuración, e incluso hojas de estilo y archivos de <em>Javascript</em> (consulta <a class="reference internal" href="#page-creation-bundles"><em>El sistema de paquetes</em></a>).</p>
<p>Para crear un paquete llamado <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt> (el paquete de ejemplo que vamos a construir en este capítulo), ejecuta la siguiente orden y sigue las instrucciones en pantalla (usa todas las opciones predeterminadas):</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console generate:bundle --namespace<span class="o">=</span>Acme/HelloBundle --format<span class="o">=</span>yml
</pre></div>
</div>
<p>Detrás del escenario, se crea un directorio para el paquete en <tt class="docutils literal"><span class="pre">src/Acme/HelloBundle</span></tt>.
Además agrega automáticamente una línea al archivo <tt class="docutils literal"><span class="pre">app/AppKernel.php</span></tt> para registrar el paquete en el núcleo:</p>
<div class="highlight-python"><pre>// app/AppKernel.php
public function registerBundles()
{
    $bundles = array(
        // ...
        new Acme\HelloBundle\AcmeHelloBundle(),
    );
    // ...

    return $bundles;
}</pre>
</div>
<p>Ahora que ya está configurado el paquete, puedes comenzar a construir tu aplicación dentro del paquete.</p>
</div>
<div class="section" id="paso-1-creando-la-ruta">
<h3>Paso 1: Creando la ruta<a class="headerlink" href="#paso-1-creando-la-ruta" title="Enlazar permanentemente con este título">¶</a></h3>
<p>De manera predeterminada, el archivo de configuración de enrutado en una aplicación <em>Symfony2</em> se encuentra en <tt class="docutils literal"><span class="pre">app/config/routing.yml</span></tt>. Al igual que toda la configuración en <em>Symfony2</em>, fuera de la caja también puedes optar por utilizar <em>XML</em> o <em>PHP</em> para configurar tus rutas.</p>
<p>Si te fijas en el archivo de enrutado principal, verás que <em>Symfony</em> ya ha agregado una entrada al generar el <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/routing.yml</span>
<span class="l-Scalar-Plain">AcmeHelloBundle</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">resource</span><span class="p-Indicator">:</span> <span class="s">&quot;@AcmeHelloBundle/Resources/config/routing.yml&quot;</span>
    <span class="l-Scalar-Plain">prefix</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/routing.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;@AcmeHelloBundle/Resources/config/routing.xml&quot;</span> <span class="na">prefix=</span><span class="s">&quot;/&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// app/config/routing.php</span>
<span class="x">use Symfony\Component\Routing\RouteCollection;</span>
<span class="x">use Symfony\Component\Routing\Route;</span>

<span class="x">$collection = new RouteCollection();</span>
<span class="x">$collection-&gt;addCollection(</span>
<span class="x">    $loader-&gt;import(&#39;@AcmeHelloBundle/Resources/config/routing.php&#39;),</span>
<span class="x">    &#39;/&#39;,</span>
<span class="x">);</span>

<span class="x">return $collection;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Esta entrada es bastante básica: le dice a <em>Symfony</em> que cargue la configuración de enrutado del archivo <tt class="docutils literal"><span class="pre">Resources/config/routing.yml</span></tt> que reside en el interior del <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt>.
Esto significa que colocas la configuración de enrutado directamente en <tt class="docutils literal"><span class="pre">app/config/routing.yml</span></tt> u organizas tus rutas a través de tu aplicación, y las importas desde aquí.</p>
<p>Ahora que el archivo <tt class="docutils literal"><span class="pre">routing.yml</span></tt> es importado desde el paquete, añade la nueva ruta que define la <em>URL</em> de la página que estás a punto de crear:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Acme/HelloBundle/Resources/config/routing.yml</span>
<span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/hello/{name}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">AcmeHelloBundle</span><span class="p-Indicator">:</span><span class="nv">Hello</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/HelloBundle/Resources/config/routing.xml --&gt;</span>
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>

<span class="nt">&lt;routes</span> <span class="na">xmlns=</span><span class="s">&quot;http://symfony.com/schema/routing&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://symfony.com/schema/routing http://symfony.com/schema/routing/routing-1.0.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;route</span> <span class="na">id=</span><span class="s">&quot;hello&quot;</span> <span class="na">pattern=</span><span class="s">&quot;/hello/{name}&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;default</span> <span class="na">key=</span><span class="s">&quot;_controller&quot;</span><span class="nt">&gt;</span>AcmeHelloBundle:Hello:index<span class="nt">&lt;/default&gt;</span>
    <span class="nt">&lt;/route&gt;</span>
<span class="nt">&lt;/routes&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// src/Acme/HelloBundle/Resources/config/routing.php</span>
<span class="x">use Symfony\Component\Routing\RouteCollection;</span>
<span class="x">use Symfony\Component\Routing\Route;</span>

<span class="x">$collection = new RouteCollection();</span>
<span class="x">$collection-&gt;add(&#39;hello&#39;, new Route(&#39;/hello/{name}&#39;, array(</span>
<span class="x">    &#39;_controller&#39; =&gt; &#39;AcmeHelloBundle:Hello:index&#39;,</span>
<span class="x">)));</span>

<span class="x">return $collection;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>La ruta se compone de dos piezas básicas: el <tt class="docutils literal"><span class="pre">patrón</span></tt>, que es la <em>URL</em> con la que esta ruta debe coincidir, y un arreglo <tt class="docutils literal"><span class="pre">defaults</span></tt>, que especifica el controlador que se debe ejecutar. La sintaxis del marcador de posición en el patrón (<tt class="docutils literal"><span class="pre">{name}</span></tt>) es un comodín. Significa que <tt class="docutils literal"><span class="pre">/hello/Ryan</span></tt>, <tt class="docutils literal"><span class="pre">/hello/Fabien</span></tt> o cualquier otra <em>URI</em> similar coincidirá con esta ruta. El parámetro marcador de posición <tt class="docutils literal"><span class="pre">{name}</span></tt> también se pasará al controlador, de manera que podamos utilizar su valor para saludar personalmente al usuario.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El sistema de enrutado tiene muchas más características para crear estructuras <em>URI</em> flexibles y potentes en tu aplicación. Para más detalles, consulta el capítulo <a class="reference internal" href="routing.html"><em>Enrutando</em></a>.</p>
</div>
</div>
<div class="section" id="paso-2-creando-el-controlador">
<h3>Paso 2: Creando el controlador<a class="headerlink" href="#paso-2-creando-el-controlador" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Cuando una <em>URL</em> como <tt class="docutils literal"><span class="pre">/hello/Ryan</span></tt> es manejada por la aplicación, la ruta <tt class="docutils literal"><span class="pre">hello</span></tt> corresponde con el controlador <tt class="docutils literal"><span class="pre">AcmeHelloBundle:Hello:index</span></tt> el cual es ejecutado por la plataforma. El segundo paso del proceso de creación de páginas es precisamente la creación de ese controlador.</p>
<p>El controlador &#8212; <tt class="docutils literal"><span class="pre">AcmeHelloBundle:Hello:index</span></tt> es el <em>nombre lógico</em> del controlador, el cual se asigna al método <tt class="docutils literal"><span class="pre">indexAction</span></tt> de una clase <em>PHP</em> llamada <tt class="docutils literal"><span class="pre">Acme\HelloBundle\Controller\Hello</span></tt>. Empieza creando este archivo dentro de tu <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt>:</p>
<div class="highlight-python"><pre>// src/Acme/HelloBundle/Controller/HelloController.php
namespace Acme\HelloBundle\Controller;

use Symfony\Component\HttpFoundation\Response;

class HelloController
{
}</pre>
</div>
<p>En realidad, el controlador no es más que un método <em>PHP</em> que tú creas y <em>Symfony</em> ejecuta. Aquí es donde el código utiliza la información de la petición para construir y preparar el recurso solicitado. Salvo en algunos casos avanzados, el producto final de un controlador siempre es el mismo: un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> de <em>Symfony2</em>.</p>
<p>Crea el método <tt class="docutils literal"><span class="pre">indexAction</span></tt> que <em>Symfony</em> ejecutará cuando concuerde la ruta <tt class="docutils literal"><span class="pre">hello</span></tt>:</p>
<div class="highlight-python"><pre>// src/Acme/HelloBundle/Controller/HelloController.php

// ...
class HelloController
{
    public function indexAction($name)
    {
        return new Response('&lt;html&gt;&lt;body&gt;Hello '.$name.'!&lt;/body&gt;&lt;/html&gt;');
    }
}</pre>
</div>
<p>El controlador es simple: este crea un nuevo objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>, cuyo primer argumento es el contenido que se debe utilizar para la respuesta (una pequeña página <em>HTML</em> en este ejemplo).</p>
<p>¡Enhorabuena! Después de crear solamente una ruta y un controlador ¡ya tienes una página completamente funcional! Si todo lo has configurado correctamente, la aplicación debe darte la bienvenida:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app_dev.php/hello/Ryan
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>También puedes ver tu aplicación en el <a class="reference internal" href="#environments-summary"><em>entorno</em></a>  &#8220;prod&#8221; visitando:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app.php/hello/Ryan
</pre></div>
</div>
<p>Si se produce un error, probablemente sea porque necesitas vaciar la caché ejecutando:</p>
<div class="last highlight-bash"><div class="highlight"><pre>php app/console cache:clear --env<span class="o">=</span>prod --no-debug
</pre></div>
</div>
</div>
<p>Un opcional, pero frecuente, tercer paso en el proceso es crear una plantilla.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Los controladores son el punto de entrada principal a tu código y un ingrediente clave en la creación de páginas. Puedes encontrar mucho más información en el capítulo <a class="reference internal" href="controller.html"><em>Controlador</em></a>.</p>
</div>
</div>
<div class="section" id="paso-3-opcional-creando-la-plantilla">
<h3>Paso 3 opcional: Creando la plantilla<a class="headerlink" href="#paso-3-opcional-creando-la-plantilla" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Las plantillas te permiten mover toda la presentación (por ejemplo, código <em>HTML</em>) a un archivo separado y reutilizar diferentes partes del diseño de la página. En vez de escribir el código <em>HTML</em> dentro del controlador, en su lugar reproduce una plantilla:</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span class="x">// src/Acme/HelloBundle/Controller/HelloController.php</span>
<span class="x">namespace Acme\HelloBundle\Controller;</span>

<span class="x">use Symfony\Bundle\FrameworkBundle\Controller\Controller;</span>

<span class="x">class HelloController extends Controller</span>
<span class="x">{</span>
<span class="x">    public function indexAction($name)</span>
<span class="x">    {</span>
<span class="x">        return $this-&gt;render(&#39;AcmeHelloBundle:Hello:index.html.twig&#39;, array(&#39;name&#39; =&gt; $name));</span>

<span class="x">        // en su lugar reprodice una plantilla PHP</span>
<span class="x">        // return $this-&gt;render(&#39;AcmeHelloBundle:Hello:index.html.php&#39;, array(&#39;name&#39; =&gt; $name));</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Para poder usar el método <tt class="docutils literal"><span class="pre">render()</span></tt>, debes extender la clase <tt class="docutils literal"><span class="pre">Symfony\Bundle\FrameworkBundle\Controller\Controller</span></tt> (documentación de la <em>API</em>: <tt class="xref py py-class docutils literal"><span class="pre">Symfony\Bundle\FrameworkBundle\Controller\Controller</span></tt>), la cual añade atajos para tareas comunes en controladores. Esto se hace en el ejemplo anterior añadiendo la declaración <tt class="docutils literal"><span class="pre">use</span></tt> en la línea 4 y luego extendiendo el <tt class="docutils literal"><span class="pre">Controlador</span></tt> en la línea 6.</p>
</div>
<p>El método <tt class="docutils literal"><span class="pre">render()</span></tt> crea un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt> poblado con el contenido propuesto, y reproduce la plantilla. Como cualquier otro controlador, en última instancia vas a devolver ese objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>.</p>
<p>Ten en cuenta que hay dos ejemplos diferentes para procesar la plantilla.
De forma predeterminada, <em>Symfony2</em> admite dos diferentes lenguajes de plantillas: las clásicas plantillas <em>PHP</em> y las breves pero poderosas plantillas <a class="reference external" href="http://sf2-es.net16.net/twig/index.html">Twig</a>. No te espantes &#8212;eres libre de optar por una o, incluso, ambas en el mismo proyecto.</p>
<p>El controlador procesa la plantilla <tt class="docutils literal"><span class="pre">AcmeHelloBundle:Hello:index.html.twig</span></tt>, utilizando la siguiente convención de nomenclatura:</p>
<blockquote>
<div><strong>NombrePaquete</strong>:<strong>NombreControlador</strong>:<strong>NombrePlantilla</strong></div></blockquote>
<p>Este es el nombre <em>lógico</em> de la plantilla, el cual se asigna a una ubicación física usando la siguiente convención.</p>
<blockquote>
<div><strong>/ruta/a/NombrePaquete</strong>/Resources/views/<strong>NombreControlador</strong>/<strong>NombrePlantilla</strong></div></blockquote>
<p>En este caso, <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt> es el nombre del paquete, <tt class="docutils literal"><span class="pre">Hello</span></tt> es el controlador e <tt class="docutils literal"><span class="pre">index.html.twig</span></tt> la plantilla:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-jinja"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="x"> </span><span class="c">{# src/Acme/HelloBundle/Resources/views/Hello/index.html.twig #}</span><span class="x"></span>
<span class="x"> </span><span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;::base.html.twig&#39;</span> <span class="cp">%}</span><span class="x"></span>

<span class="x"> </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">     Hello </span><span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span><span class="x">!</span>
<span class="x"> </span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</td></tr></table></div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">&lt;!-- src/Acme/HelloBundle/Resources/views/Hello/index.html.php --&gt;</span>
<span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">extend</span><span class="p">(</span><span class="s1">&#39;::base.html.php&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">Hello </span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">escape</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">!</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Veamos la situación a través de la plantilla <em>Twig</em> línea por línea:</p>
<ul class="simple">
<li><em>línea 2</em>: La etiqueta <tt class="docutils literal"><span class="pre">extends</span></tt> define una plantilla padre. La plantilla define explícitamente un archivo con el diseño dentro del cual será colocada.</li>
<li><em>línea 4</em>: La etiqueta <tt class="docutils literal"><span class="pre">block</span></tt> dice que todo el interior se debe colocar dentro de un bloque llamado <tt class="docutils literal"><span class="pre">body</span></tt>. Como verás, es responsabilidad de la plantilla padre (<tt class="docutils literal"><span class="pre">base.html.twig</span></tt>) reproducir, en última instancia, el bloque llamado <tt class="docutils literal"><span class="pre">body</span></tt>.</li>
</ul>
<p>La plantilla padre, <tt class="docutils literal"><span class="pre">::base.html.twig</span></tt>, omite ambas porciones de su nombre tanto <strong>NombrePaquete</strong> como <strong>NombreControlador</strong> (de ahí los dobles dos puntos (<tt class="docutils literal"><span class="pre">::</span></tt>) al principio). Esto significa que la plantilla vive fuera de cualquier paquete, en el directorio <tt class="docutils literal"><span class="pre">app</span></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/Resources/views/base.html.twig #}</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;title&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Welcome!<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="nt">&lt;/title&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">stylesheets</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;shortcut icon&quot;</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset</span><span class="o">(</span><span class="s1">&#39;favicon.ico&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">javascripts</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">&lt;!-- app/Resources/views/base.html.php --&gt;</span>
<span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">    &lt;head&gt;</span>
<span class="x">        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;</span>
<span class="x">        &lt;title&gt;</span><span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;Welcome!&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&lt;/title&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;stylesheets&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        &lt;link rel=&quot;shortcut icon&quot; href=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;assets&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">getUrl</span><span class="p">(</span><span class="s1">&#39;favicon.ico&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x">&quot; /&gt;</span>
<span class="x">    &lt;/head&gt;</span>
<span class="x">    &lt;body&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;_content&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;slots&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s1">&#39;stylesheets&#39;</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">    &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>El archivo de la plantilla base define el diseño <em>HTML</em> y reproduce el bloque <tt class="docutils literal"><span class="pre">body</span></tt> que definiste en la plantilla <tt class="docutils literal"><span class="pre">index.html.twig</span></tt>. Además reproduce el bloque <tt class="docutils literal"><span class="pre">title</span></tt>, el cual puedes optar por definir en la plantilla <tt class="docutils literal"><span class="pre">index.html.twig</span></tt>.
Dado que no has definido el bloque <tt class="docutils literal"><span class="pre">title</span></tt> en la plantilla derivada, el valor predeterminado es <tt class="docutils literal"><span class="pre">&quot;Welcome!&quot;</span></tt>.</p>
<p>Las plantillas son una poderosa manera de reproducir y organizar el contenido de tu página. Una plantilla puede reproducir cualquier cosa, desde el marcado <em>HTML</em>, al código <em>CSS</em>, o cualquier otra cosa que el controlador posiblemente tenga que devolver.</p>
<p>En el ciclo de vida del manejo de una petición, el motor de plantillas simplemente es una herramienta opcional. Recuerda que el objetivo de cada controlador es devolver un objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>. Las plantillas son una poderosa, pero opcional, herramienta para crear el contenido de ese objeto <tt class="docutils literal"><span class="pre">Respuesta</span></tt>.</p>
</div>
</div>
<div class="section" id="la-estructura-de-directorios">
<span id="index-2"></span><h2>La estructura de directorios<a class="headerlink" href="#la-estructura-de-directorios" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Después de unas cortas secciones, ya entiendes la filosofía detrás de la creación y procesamiento de páginas en <em>Symfony2</em>. También has comenzado a ver cómo están estructurados y organizados los proyectos <em>Symfony2</em>. Al final de esta sección, sabrás dónde encontrar y colocar diferentes tipos de archivos y por qué.</p>
<p>Aunque totalmente flexible, por omisión, cada <a class="reference internal" href="../glossary.html#term-aplicacion"><em class="xref std std-term">aplicación</em></a> <em>Symfony</em> tiene la misma estructura de directorios básica y recomendada:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">app/</span></tt>: Este directorio contiene la configuración de la aplicación;</li>
<li><tt class="docutils literal"><span class="pre">src/</span></tt>: Todo el código <em>PHP</em> del proyecto se almacena en este directorio;</li>
<li><tt class="docutils literal"><span class="pre">vendor/</span></tt>: Por convención aquí se coloca cualquier biblioteca de terceros;</li>
<li><tt class="docutils literal"><span class="pre">web/</span></tt>: Este es el directorio <em>web</em> raíz y contiene todos los archivos de acceso público;</li>
</ul>
<div class="section" id="el-directorio-web">
<h3>El directorio <em>web</em><a class="headerlink" href="#el-directorio-web" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El directorio raíz del servidor <em>web</em>, es el hogar de todos los archivos públicos y estáticos tales como imágenes, hojas de estilo y archivos <em>JavaScript</em>. También es el lugar donde vive cada <a class="reference internal" href="../glossary.html#term-controlador-frontal"><em class="xref std std-term">controlador frontal</em></a>:</p>
<div class="highlight-python"><pre>// web/app.php
require_once __DIR__.'/../app/bootstrap.php.cache';
require_once __DIR__.'/../app/AppKernel.php';

use Symfony\Component\HttpFoundation\Request;

$kernel = new AppKernel('prod', false);
$kernel-&gt;loadClassCache();
$kernel-&gt;handle(Request::createFromGlobals())-&gt;send();</pre>
</div>
<p>El archivo del controlador frontal (<tt class="docutils literal"><span class="pre">app.php</span></tt> en este ejemplo) es el archivo <em>PHP</em> que realmente se ejecuta cuando utilizas una aplicación <em>Symfony2</em> y su trabajo consiste en utilizar una clase del núcleo, <tt class="docutils literal"><span class="pre">AppKernel</span></tt>, para arrancar la aplicación.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>Tener un controlador frontal significa que se utilizan diferentes y más flexibles <em>URL</em> que en una aplicación <em>PHP</em> típica. Cuando usamos un controlador frontal, las <em>URL</em> se formatean de la siguiente manera:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app.php/hello/Ryan
</pre></div>
</div>
<p>El controlador frontal, <tt class="docutils literal"><span class="pre">app.php</span></tt>, se ejecuta y la <em>URL</em> &#8220;interna&#8221;: <tt class="docutils literal"><span class="pre">/hello/Ryan</span></tt> es encaminada internamente con la configuración de enrutado.
Al utilizar las reglas <tt class="docutils literal"><span class="pre">mod_rewrite</span></tt> de <em>Apache</em>, puedes forzar la ejecución del archivo <tt class="docutils literal"><span class="pre">app.php</span></tt> sin necesidad de especificarlo en la <em>URL</em>:</p>
<div class="last highlight-text"><div class="highlight"><pre>http://localhost/hello/Ryan
</pre></div>
</div>
</div>
<p>Aunque los controladores frontales son esenciales en el manejo de cada petición, rara vez los tendrás que modificar o incluso pensar en ellos. Los vamos a mencionar brevemente de nuevo en la sección de <a class="reference internal" href="#entornos">Entornos</a>.</p>
</div>
<div class="section" id="el-directorio-aplicacion-app">
<h3>El directorio aplicación (<tt class="docutils literal"><span class="pre">app</span></tt>)<a class="headerlink" href="#el-directorio-aplicacion-app" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Como vimos en el controlador frontal, la clase <tt class="docutils literal"><span class="pre">AppKernel</span></tt> es el punto de entrada principal de la aplicación y es la responsable de toda la configuración. Como tal, se almacena en el directorio <tt class="docutils literal"><span class="pre">app/</span></tt>.</p>
<p>Esta clase debe implementar dos métodos que definen todo lo que <em>Symfony</em> necesita saber acerca de tu aplicación. Ni siquiera tienes que preocuparte de estos métodos durante el arranque &#8212;<em>Symfony</em> los llena por ti con parámetros predeterminados.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">registerBundles()</span></tt>: Devuelve una matriz con todos los paquetes necesarios para ejecutar la aplicación (consulta <a class="reference internal" href="#page-creation-bundles"><em>El sistema de paquetes</em></a>);</li>
<li><tt class="docutils literal"><span class="pre">registerContainerConfiguration()</span></tt>: Carga el archivo de configuración de recursos principal de la aplicación (consulta la sección <a class="reference internal" href="#configurando-la-aplicacion">Configurando la aplicación</a>);</li>
</ul>
<p>En el desarrollo del día a día, generalmente vas a utilizar el directorio <tt class="docutils literal"><span class="pre">app/</span></tt> para modificar la configuración y los archivos de enrutado en el directorio <tt class="docutils literal"><span class="pre">app/config/</span></tt> (consulta la sección <a class="reference internal" href="#configurando-la-aplicacion">Configurando la aplicación</a>). Este también contiene el directorio caché de la aplicación (<tt class="docutils literal"><span class="pre">app/cache</span></tt>), un directorio de registro (<tt class="docutils literal"><span class="pre">app/logs</span></tt>) y un directorio para archivos de recursos a nivel de aplicación, tal como plantillas (<tt class="docutils literal"><span class="pre">app/Resources</span></tt>).
Aprenderás más sobre cada uno de estos directorios en capítulos posteriores.</p>
<hr class="docutils" />
<blockquote>
<div><p>Al arrancar <em>Symfony</em>, un archivo especial &#8212;<tt class="docutils literal"><span class="pre">app/autoload.php</span></tt>&#8212; es incluido.
Este archivo es responsable de configurar el cargador automático, el cual cargará automáticamente los archivos de tu aplicación desde el directorio <tt class="docutils literal"><span class="pre">src/</span></tt> y librerías de terceros del directorio <tt class="docutils literal"><span class="pre">vendor/</span></tt>.</p>
<p>Gracias al cargador automático, nunca tendrás que preocuparte de usar declaraciones <tt class="docutils literal"><span class="pre">include</span></tt> o <tt class="docutils literal"><span class="pre">require</span></tt>. En cambio, <em>Symfony2</em> utiliza el espacio de nombres de una clase para determinar su ubicación e incluir automáticamente el archivo en el instante en que necesitas una clase.</p>
<p>El cargador automático ya está configurado para buscar cualquiera de tus clases <em>PHP</em> en el directorio <tt class="docutils literal"><span class="pre">src/</span></tt>. Para que trabaje la carga automática, el nombre de la clase y la ruta del archivo deben seguir el mismo patrón:</p>
<div class="highlight-text"><div class="highlight"><pre>Class Name:
    Acme\HelloBundle\Controller\HelloController
Path:
    src/Acme/HelloBundle/Controller/HelloController.php
</pre></div>
</div>
<p>Típicamente, la única vez que tendrás que preocuparte por el archivo <tt class="docutils literal"><span class="pre">app/autoload.php</span></tt> es cuando estás incluyendo una nueva biblioteca de terceros en el directorio <tt class="docutils literal"><span class="pre">vendor/</span></tt>. Para más información sobre la carga automática, consulta <a class="reference internal" href="../cookbook/tools/autoloader.html"><em>Cómo cargar clases automáticamente</em></a>.</p>
</div></blockquote>
</div>
<div class="section" id="el-directorio-fuente-src">
<h3>El directorio fuente (<tt class="docutils literal"><span class="pre">src</span></tt>)<a class="headerlink" href="#el-directorio-fuente-src" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En pocas palabras, el directorio <tt class="docutils literal"><span class="pre">src/</span></tt> contiene todo el código real (código <em>PHP</em>, plantillas, archivos de configuración, estilo, etc.) que impulsa a <em>tu</em> aplicación.
De hecho, cuando desarrollas, la gran mayoría de tu trabajo se llevará a cabo dentro de uno o más paquetes creados en este directorio.</p>
<p>Pero, ¿qué es exactamente un <a class="reference internal" href="../glossary.html#term-paquete"><em class="xref std std-term">paquete</em></a>?</p>
</div>
</div>
<div class="section" id="el-sistema-de-paquetes">
<span id="page-creation-bundles"></span><h2>El sistema de paquetes<a class="headerlink" href="#el-sistema-de-paquetes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Un paquete es similar a un complemento en otro software, pero aún mejor. La diferencia clave es que en <em>Symfony2</em> <strong>todo</strong> es un paquete, incluyendo tanto la funcionalidad básica de la plataforma como el código escrito para tu aplicación.
Los paquetes son ciudadanos de primera clase en <em>Symfony2</em>. Esto te proporciona la flexibilidad para utilizar las características preconstruidas envasadas en <a class="reference external" href="http://symfony2bundles.org/">paquetes de terceros</a> o para distribuir tus propios paquetes. Además, facilita la selección y elección de las características por habilitar en tu aplicación y optimizarlas en la forma que desees.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Si bien, aquí vamos a cubrir lo básico, hay un capítulo dedicado completamente al tema de los <a class="reference internal" href="../cookbook/bundles/best_practices.html"><em>paquetes</em></a>.</p>
</div>
<p>Un paquete simplemente es un conjunto estructurado de archivos en un directorio que implementa una sola característica. Puedes crear un <tt class="docutils literal"><span class="pre">BlogBundle</span></tt>, un <tt class="docutils literal"><span class="pre">ForoBundle</span></tt> o un paquete para gestionar usuarios (muchos de ellos ya existen como paquetes de código abierto). Cada directorio contiene todo lo relacionado con esa característica, incluyendo archivos <em>PHP</em>, plantillas, hojas de estilo, archivos <em>Javascript</em>, pruebas y cualquier otra cosa necesaria.
Cada aspecto de una característica existe en un paquete y cada característica vive en un paquete.</p>
<p>Una aplicación se compone de paquetes tal como está definido en el método <tt class="docutils literal"><span class="pre">registerBundles()</span></tt> de la clase <tt class="docutils literal"><span class="pre">AppKernel</span></tt>:</p>
<div class="highlight-python"><pre>// app/AppKernel.php
public function registerBundles()
{
    $bundles = array(
        new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
        new Symfony\Bundle\SecurityBundle\SecurityBundle(),
        new Symfony\Bundle\TwigBundle\TwigBundle(),
        new Symfony\Bundle\MonologBundle\MonologBundle(),
        new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
        new Symfony\Bundle\DoctrineBundle\DoctrineBundle(),
        new Symfony\Bundle\AsseticBundle\AsseticBundle(),
        new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
        new JMS\SecurityExtraBundle\JMSSecurityExtraBundle(),
    );

    if (in_array($this-&gt;getEnvironment(), array('dev', 'test'))) {
        $bundles[] = new Acme\DemoBundle\AcmeDemoBundle();
        $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle();
        $bundles[] = new Sensio\Bundle\DistributionBundle\SensioDistributionBundle();
        $bundles[] = new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle();
    }

    return $bundles;
}</pre>
</div>
<p>Con el método <tt class="docutils literal"><span class="pre">registerBundles()</span></tt>, tienes el control total sobre cuales paquetes utiliza tu aplicación (incluyendo los paquetes del núcleo de <em>Symfony</em>).</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Un paquete puede vivir en <em>cualquier lugar</em> siempre y cuando <em>Symfony2</em> lo pueda cargar automáticamente (vía el autocargador configurado en <tt class="docutils literal"><span class="pre">app/autoload.php</span></tt>).</p>
</div>
<div class="section" id="creando-un-paquete">
<h3>Creando un paquete<a class="headerlink" href="#creando-un-paquete" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La edición estándar de <em>Symfony</em> viene con una práctica tarea que crea un paquete totalmente funcional para ti. Por supuesto, la creación manual de un paquete también es muy fácil.</p>
<p>Para mostrarte lo sencillo que es el sistema de paquetes, vamos a crear y activar un nuevo paquete llamado <tt class="docutils literal"><span class="pre">AcmeTestBundle</span></tt>.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">La parte <tt class="docutils literal"><span class="pre">Acme</span></tt> es sólo un nombre ficticio que debes sustituir por un &#8220;proveedor&#8221; que represente tu nombre u organización (por ejemplo, <tt class="docutils literal"><span class="pre">ABCTestBundle</span></tt> por alguna empresa llamada <tt class="docutils literal"><span class="pre">ABC</span></tt>).</p>
</div>
<p>En primer lugar, crea un directorio <tt class="docutils literal"><span class="pre">src/Acme/TestBundle/</span></tt> y añade un nuevo archivo llamado <tt class="docutils literal"><span class="pre">AcmeTestBundle.php</span></tt>:</p>
<div class="highlight-python"><pre>// src/Acme/TestBundle/AcmeTestBundle.php
namespace Acme\TestBundle;

    use Symfony\Component\HttpKernel\Bundle\Bundle;

class AcmeTestBundle extends Bundle
{
}</pre>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">El nombre <tt class="docutils literal"><span class="pre">AcmeTestBundle</span></tt> sigue las <a class="reference internal" href="../cookbook/bundles/best_practices.html#bundles-naming-conventions"><em>convenciones de nomenclatura de paquetes</em></a> estándar.
También puedes optar por acortar el nombre del paquete simplemente a <tt class="docutils literal"><span class="pre">TestBundle</span></tt> al nombrar esta clase <tt class="docutils literal"><span class="pre">TestBundle</span></tt> (y el nombre del archivo <tt class="docutils literal"><span class="pre">TestBundle.php</span></tt>).</p>
</div>
<p>Esta clase vacía es la única pieza que necesitamos para crear nuestro nuevo paquete. Aunque comúnmente está vacía, esta clase es poderosa y se puede utilizar para personalizar el comportamiento del paquete.</p>
<p>Ahora que hemos creado nuestro paquete, tenemos que activarlo a través de la clase <tt class="docutils literal"><span class="pre">AppKernel</span></tt>:</p>
<div class="highlight-python"><pre>// app/AppKernel.php
public function registerBundles()
{
    $bundles = array(
        // ...

        // registra tus paquetes
        new Acme\TestBundle\AcmeTestBundle(),
    );
    // ...

    return $bundles;
}</pre>
</div>
<p>Y si bien <tt class="docutils literal"><span class="pre">AcmeTestBundle</span></tt> aún no hace nada, está listo para utilizarlo.</p>
<p>Y aunque esto es bastante fácil, <em>Symfony</em> también proporciona una interfaz de línea de ordenes para generar una estructura de paquete básica:</p>
<div class="highlight-bash"><div class="highlight"><pre>php app/console generate:bundle --namespace<span class="o">=</span>Acme/TestBundle
</pre></div>
</div>
<p>Esto genera el esqueleto del paquete con un controlador básico, la plantilla y recursos de enrutado que se pueden personalizar. Aprenderás más sobre la línea de ordenes de las herramientas de <em>Symfony2</em> más tarde.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Cuando quieras crear un nuevo paquete o uses un paquete de terceros, siempre asegúrate de habilitar el paquete en <tt class="docutils literal"><span class="pre">registerBundles()</span></tt>. Cuando usas la orden <tt class="docutils literal"><span class="pre">generate:bundle</span></tt>, hace esto para ti.</p>
</div>
</div>
<div class="section" id="estructura-de-directorios-de-un-paquete">
<h3>Estructura de directorios de un paquete<a class="headerlink" href="#estructura-de-directorios-de-un-paquete" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La estructura de directorios de un paquete es simple y flexible. De forma predeterminada, el sistema de paquetes sigue una serie de convenciones que ayudan a mantener el código consistente entre todos los paquetes <em>Symfony2</em>. Echa un vistazo a <tt class="docutils literal"><span class="pre">AcmeHelloBundle</span></tt>, ya que contiene algunos de los elementos más comunes de un paquete:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Controller/</span></tt> Contiene los controladores del paquete (por ejemplo, <tt class="docutils literal"><span class="pre">HelloController.php</span></tt>);</li>
<li><tt class="docutils literal"><span class="pre">Resources/config/</span></tt> Contiene la configuración, incluyendo la configuración de enrutado (por ejemplo, <tt class="docutils literal"><span class="pre">routing.yml</span></tt>);</li>
<li><tt class="docutils literal"><span class="pre">Resources/views/</span></tt> Contiene las plantillas organizadas por nombre de controlador (por ejemplo, <tt class="docutils literal"><span class="pre">Hello/index.html.twig</span></tt>);</li>
<li><tt class="docutils literal"><span class="pre">Resources/public/</span></tt> Contiene recursos <em>web</em> (imágenes, hojas de estilo, etc.) y es copiado o enlazado simbólicamente al directorio <tt class="docutils literal"><span class="pre">web/</span></tt> del proyecto vía la orden de consola <tt class="docutils literal"><span class="pre">assets:install</span></tt>;</li>
<li><tt class="docutils literal"><span class="pre">Tests/</span></tt> Tiene todas las pruebas para el paquete.</li>
</ul>
<p>Un paquete puede ser tan pequeño o tan grande como la característica que implementa. Este contiene sólo los archivos que necesita y nada más.</p>
<p>A medida que avances en el libro, aprenderás cómo persistir objetos a una base de datos, crear y validar formularios, crear traducciones para tu aplicación, escribir pruebas y mucho más. Cada uno de estos tiene su propio lugar y rol dentro del paquete.</p>
</div>
</div>
<div class="section" id="configurando-la-aplicacion">
<h2>Configurando la aplicación<a class="headerlink" href="#configurando-la-aplicacion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La aplicación consiste de una colección de paquetes que representan todas las características y capacidades de tu aplicación. Cada paquete se puede personalizar a través de archivos de configuración escritos en <em>YAML</em>, <em>XML</em> o <em>PHP</em>. De forma predeterminada, el archivo de configuración principal vive en el directorio <tt class="docutils literal"><span class="pre">app/config/</span></tt> y se llama <tt class="docutils literal"><span class="pre">config.yml</span></tt>, <tt class="docutils literal"><span class="pre">config.xml</span></tt> o <tt class="docutils literal"><span class="pre">config.php</span></tt> en función del formato que prefieras:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><pre># app/config/config.yml
imports:
    - { resource: parameters.yml }
    - { resource: security.yml }

framework:
    secret:          %secret%
    charset:         UTF-8
    router:          { resource: "%kernel.root_dir%/config/routing.yml" }
    # ...

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%

# ...</pre>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="nt">&lt;imports&gt;</span>
    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;parameters.yml&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;security.yml&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/imports&gt;</span>

<span class="nt">&lt;framework:config</span> <span class="na">charset=</span><span class="s">&quot;UTF-8&quot;</span> <span class="na">secret=</span><span class="s">&quot;%secret%&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;framework:router</span> <span class="na">resource=</span><span class="s">&quot;%kernel.root_dir%/config/routing.xml&quot;</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/framework:config&gt;</span>

<span class="c">&lt;!-- Twig Configuration --&gt;</span>
<span class="nt">&lt;twig:config</span> <span class="na">debug=</span><span class="s">&quot;%kernel.debug%&quot;</span> <span class="na">strict-variables=</span><span class="s">&quot;%kernel.debug%&quot;</span> <span class="nt">/&gt;</span>

<span class="c">&lt;!-- ... --&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">$this-&gt;import(&#39;parameters.yml&#39;);</span>
<span class="x">$this-&gt;import(&#39;security.yml&#39;);</span>

<span class="x">$container-&gt;loadFromExtension(&#39;framework&#39;, array(</span>
<span class="x">    &#39;secret&#39;          =&gt; &#39;%secret%&#39;,</span>
<span class="x">    &#39;charset&#39;         =&gt; &#39;UTF-8&#39;,</span>
<span class="x">    &#39;router&#39;          =&gt; array(&#39;resource&#39; =&gt; &#39;%kernel.root_dir%/config/routing.php&#39;),</span>
<span class="x">    // ...</span>
<span class="x">    ),</span>
<span class="x">));</span>

<span class="x">// Configuración Twig</span>
<span class="x">$container-&gt;loadFromExtension(&#39;twig&#39;, array(</span>
<span class="x">    &#39;debug&#39;            =&gt; &#39;%kernel.debug%&#39;,</span>
<span class="x">    &#39;strict_variables&#39; =&gt; &#39;%kernel.debug%&#39;,</span>
<span class="x">));</span>

<span class="x">// ...</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Aprenderás exactamente cómo cargar cada archivo/formato en la siguiente sección, <a class="reference internal" href="#entornos">Entornos</a>.</p>
</div>
<p>Cada entrada de nivel superior como <tt class="docutils literal"><span class="pre">framework</span></tt> o <tt class="docutils literal"><span class="pre">twig</span></tt> define la configuración de un paquete específico. Por ejemplo, la clave <tt class="docutils literal"><span class="pre">framework</span></tt> define la configuración para el núcleo de <em>Symfony</em> <tt class="docutils literal"><span class="pre">FrameworkBundle</span></tt> e incluye la configuración de enrutado, plantillas, y otros sistemas del núcleo.</p>
<p>Por ahora, no te preocupes por las opciones de configuración específicas de cada sección.
El archivo de configuración viene con parámetros predeterminados. A medida que leas y explores más cada parte de <em>Symfony2</em>, aprenderás sobre las opciones de configuración específicas de cada característica.</p>
<div class="sidebar">
<p class="first sidebar-title">Formatos de configuración</p>
<p>A lo largo de los capítulos, todos los ejemplos de configuración muestran los tres formatos (<em>YAML</em>, <em>XML</em> y <em>PHP</em>). Cada uno tiene sus propias ventajas y desventajas. Tú eliges cual utilizar:</p>
<ul class="last simple">
<li><em>YAML</em>: Sencillo, limpio y fácil de leer;</li>
<li><em>XML</em>: Más poderoso que <em>YAML</em> a veces y es compatible con el autocompletado del <em>IDE</em>;</li>
<li><em>PHP</em>: Muy potente, pero menos fácil de leer que los formatos de configuración estándar.</li>
</ul>
</div>
</div>
<div class="section" id="entornos">
<span id="environments-summary"></span><span id="index-3"></span><h2>Entornos<a class="headerlink" href="#entornos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Una aplicación puede funcionar en diversos entornos. Los diferentes entornos comparten el mismo código <em>PHP</em> (aparte del controlador frontal), pero usan diferente configuración. Por ejemplo, un entorno de desarrollo <tt class="docutils literal"><span class="pre">dev</span></tt> registrará las advertencias y errores, mientras que un entorno de producción <tt class="docutils literal"><span class="pre">prod</span></tt> sólo registra los errores. Algunos archivos se vuelven a generar en cada petición en el entorno <tt class="docutils literal"><span class="pre">dev</span></tt> (para mayor comodidad de los desarrolladores), pero se memorizan en caché en el entorno <tt class="docutils literal"><span class="pre">prod</span></tt>. Todos los entornos viven juntos en la misma máquina y ejecutan la misma aplicación.</p>
<p>Un proyecto <em>Symfony2</em> generalmente comienza con tres entornos (<tt class="docutils literal"><span class="pre">dev</span></tt>, <tt class="docutils literal"><span class="pre">test</span></tt> y <tt class="docutils literal"><span class="pre">prod</span></tt>), aunque la creación de nuevos entornos es fácil. Puedes ver tu aplicación en diferentes entornos con sólo cambiar el controlador frontal en tu navegador. Para ver la aplicación en el entorno <tt class="docutils literal"><span class="pre">dev</span></tt>, accede a la aplicación a través del controlador frontal de desarrollo:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app_dev.php/hello/Ryan
</pre></div>
</div>
<p>Si deseas ver cómo se comportará tu aplicación en el entorno de producción, en su lugar, llama al controlador frontal <tt class="docutils literal"><span class="pre">prod</span></tt>:</p>
<div class="highlight-text"><div class="highlight"><pre>http://localhost/app.php/hello/Ryan
</pre></div>
</div>
<p>Puesto que el entorno <tt class="docutils literal"><span class="pre">prod</span></tt> está optimizado para velocidad; la configuración, el enrutado y las plantillas <em>Twig</em> se compilan en clases <em>PHP</em> simples y se guardan en caché.
Cuando cambies las vistas en el entorno <tt class="docutils literal"><span class="pre">prod</span></tt>, tendrás que borrar estos archivos memorizados en caché y así permitir su reconstrucción:</p>
<div class="highlight-python"><pre>php app/console cache:clear --env=prod --no-debug</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p>Si abres el archivo <tt class="docutils literal"><span class="pre">web/app.php</span></tt>, encontrarás que está configurado explícitamente para usar el entorno <tt class="docutils literal"><span class="pre">prod</span></tt>:</p>
<div class="highlight-python"><pre>$kernel = new AppKernel('prod', false);</pre>
</div>
<p class="last">Puedes crear un nuevo controlador frontal para un nuevo entorno copiando el archivo y cambiando <tt class="docutils literal"><span class="pre">prod</span></tt> por algún otro valor.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">El entorno <tt class="docutils literal"><span class="pre">test</span></tt> se utiliza cuando se ejecutan pruebas automáticas y no se puede acceder directamente a través del navegador. Consulta el capítulo <a class="reference internal" href="testing.html"><em>Probando</em></a> para más detalles.</p>
</div>
<div class="section" id="configurando-entornos">
<span id="index-4"></span><h3>Configurando entornos<a class="headerlink" href="#configurando-entornos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La clase <tt class="docutils literal"><span class="pre">AppKernel</span></tt> es responsable de cargar realmente el archivo de configuración de tu elección:</p>
<div class="highlight-python"><pre>// app/AppKernel.php
public function registerContainerConfiguration(LoaderInterface $loader)
{
    $loader-&gt;load(__DIR__.'/config/config_'.$this-&gt;getEnvironment().'.yml');
}</pre>
</div>
<p>Ya sabes que la extensión <tt class="docutils literal"><span class="pre">.yml</span></tt> se puede cambiar a <tt class="docutils literal"><span class="pre">.xml</span></tt> o <tt class="docutils literal"><span class="pre">.php</span></tt> si prefieres usar <em>XML</em> o <em>PHP</em> para escribir tu configuración.
Además, observa que cada entorno carga su propio archivo de configuración. Considera el archivo de configuración para el entorno <tt class="docutils literal"><span class="pre">dev</span></tt>.</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config_dev.yml</span>
<span class="l-Scalar-Plain">imports</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="p-Indicator">{</span> <span class="nv">resource</span><span class="p-Indicator">:</span> <span class="nv">config.yml</span> <span class="p-Indicator">}</span>

<span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">router</span><span class="p-Indicator">:</span>   <span class="p-Indicator">{</span> <span class="nv">resource</span><span class="p-Indicator">:</span> <span class="s">&quot;%kernel.root_dir%/config/routing_dev.yml&quot;</span> <span class="p-Indicator">}</span>
    <span class="l-Scalar-Plain">profiler</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">only_exceptions</span><span class="p-Indicator">:</span> <span class="nv">false</span> <span class="p-Indicator">}</span>

<span class="c1"># ...</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config_dev.xml --&gt;</span>
<span class="nt">&lt;imports&gt;</span>
    <span class="nt">&lt;import</span> <span class="na">resource=</span><span class="s">&quot;config.xml&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/imports&gt;</span>

<span class="nt">&lt;framework:config&gt;</span>
    <span class="nt">&lt;framework:router</span> <span class="na">resource=</span><span class="s">&quot;%kernel.root_dir%/config/routing_dev.xml&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;framework:profiler</span> <span class="na">only-exceptions=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/framework:config&gt;</span>

<span class="c">&lt;!-- ... --&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="x">// app/config/config_dev.php</span>
<span class="x">$loader-&gt;import(&#39;config.php&#39;);</span>

<span class="x">$container-&gt;loadFromExtension(&#39;framework&#39;, array(</span>
<span class="x">    &#39;router&#39;   =&gt; array(&#39;resource&#39; =&gt; &#39;%kernel.root_dir%/config/routing_dev.php&#39;),</span>
<span class="x">    &#39;profiler&#39; =&gt; array(&#39;only-exceptions&#39; =&gt; false),</span>
<span class="x">));</span>

<span class="x">// ...</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>La clave <tt class="docutils literal"><span class="pre">imports</span></tt> es similar a una declaración <tt class="docutils literal"><span class="pre">include</span></tt> <em>PHP</em> y garantiza que en primer lugar se carga el archivo de configuración principal (<tt class="docutils literal"><span class="pre">config.yml</span></tt>). El resto del archivo de configuración predeterminado aumenta el registro de eventos y otros ajustes conducentes a un entorno de desarrollo.</p>
<p>Ambos entornos <tt class="docutils literal"><span class="pre">prod</span></tt> y <tt class="docutils literal"><span class="pre">test</span></tt> siguen el mismo modelo: cada uno importa el archivo de configuración básico y luego modifica sus valores de configuración para adaptarlos a las necesidades específicas del entorno. Esto es sólo una convención, pero te permite reutilizar la mayor parte de tu configuración y personalizar sólo piezas puntuales entre entornos.</p>
</div>
</div>
<div class="section" id="resumen">
<h2>Resumen<a class="headerlink" href="#resumen" title="Enlazar permanentemente con este título">¶</a></h2>
<p>¡Enhorabuena! Ahora has visto todos los aspectos fundamentales de <em>Symfony2</em> y afortunadamente descubriste lo fácil y flexible que puede ser. Y si bien aún <em>hay muchas</em> características por venir, asegúrate de tener en cuenta los siguientes puntos básicos:</p>
<ul class="simple">
<li>La creación de una página es un proceso de tres pasos que involucran una <strong>ruta</strong>, un <strong>controlador</strong> y (opcionalmente) una <strong>plantilla</strong>.</li>
<li>Cada proyecto contiene sólo unos cuantos directorios principales:  <tt class="docutils literal"><span class="pre">web/</span></tt> (recursos web y controladores frontales), <tt class="docutils literal"><span class="pre">app/</span></tt> (configuración), <tt class="docutils literal"><span class="pre">src/</span></tt> (tus paquetes), y <tt class="docutils literal"><span class="pre">vendor/</span></tt> (código de terceros) (también hay un directorio <tt class="docutils literal"><span class="pre">bin/</span></tt> que se utiliza para ayudarte a actualizar las bibliotecas de proveedores);</li>
<li>Cada característica en <em>Symfony2</em> (incluyendo el núcleo de la plataforma <em>Symfony2</em>) está organizada en un <em>paquete</em>, el cual es un conjunto estructurado de archivos para esa característica;</li>
<li>La <strong>configuración</strong> de cada paquete vive en el directorio <tt class="docutils literal"><span class="pre">app/config</span></tt> y se puede especificar en <em>YAML</em>, <em>XML</em> o <em>PHP</em>;</li>
<li>Cada <strong>entorno</strong> es accesible a través de un diferente controlador frontal (por ejemplo, <tt class="docutils literal"><span class="pre">app.php</span></tt> y <tt class="docutils literal"><span class="pre">app_dev.php</span></tt>) el cual carga un archivo de configuración diferente.</li>
</ul>
<p>A partir de aquí, cada capítulo te dará a conocer más y más potentes herramientas y conceptos avanzados. Cuanto más sepas sobre <em>Symfony2</em>, tanto más apreciarás la flexibilidad de su arquitectura y el poder que te proporciona para desarrollar aplicaciones rápidamente.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Contenidos</a></h3>
  <ul>
<li><a class="reference internal" href="#">Creando páginas en <em>Symfony2</em></a><ul>
<li><a class="reference internal" href="#la-pagina-hola-symfony">La página &#8220;¡Hola <em>Symfony</em>!&#8221;</a><ul>
<li><a class="reference internal" href="#antes-de-empezar-crea-el-paquete">Antes de empezar: Crea el paquete</a></li>
<li><a class="reference internal" href="#paso-1-creando-la-ruta">Paso 1: Creando la ruta</a></li>
<li><a class="reference internal" href="#paso-2-creando-el-controlador">Paso 2: Creando el controlador</a></li>
<li><a class="reference internal" href="#paso-3-opcional-creando-la-plantilla">Paso 3 opcional: Creando la plantilla</a></li>
</ul>
</li>
<li><a class="reference internal" href="#la-estructura-de-directorios">La estructura de directorios</a><ul>
<li><a class="reference internal" href="#el-directorio-web">El directorio <em>web</em></a></li>
<li><a class="reference internal" href="#el-directorio-aplicacion-app">El directorio aplicación (<tt class="docutils literal"><span class="pre">app</span></tt>)</a></li>
<li><a class="reference internal" href="#el-directorio-fuente-src">El directorio fuente (<tt class="docutils literal"><span class="pre">src</span></tt>)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#el-sistema-de-paquetes">El sistema de paquetes</a><ul>
<li><a class="reference internal" href="#creando-un-paquete">Creando un paquete</a></li>
<li><a class="reference internal" href="#estructura-de-directorios-de-un-paquete">Estructura de directorios de un paquete</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configurando-la-aplicacion">Configurando la aplicación</a></li>
<li><a class="reference internal" href="#entornos">Entornos</a><ul>
<li><a class="reference internal" href="#configurando-entornos">Configurando entornos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#resumen">Resumen</a></li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="installation.html"
                        title="Capítulo anterior">Instalando y configurando <em>Symfony</em></a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="controller.html"
                        title="Próximo capítulo">Controlador</a></p>
<div id="searchbox" style="display: none">
  <h3>Búsqueda rápida</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Ir a" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="controller.html" title="Controlador"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Instalando y configurando Symfony"
             >anterior</a> |</li>
        <li><a href="../index.html">Symfony2</a> &raquo;</li>
          <li><a href="index.html" >Libro</a> &raquo;</li> 
      </ul>
    </div>
   <div id="disqus_thread"></div>
   
    <div class="footer">
        &copy; Copyright 2011, Traducido por Nacho Pacheco.
      Actualizado por última vez en Dec 07, 2011.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
   <script type="text/javascript"> 
    var disqus_shortname = 'documentos-mx';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
   </script> 
   <noscript>
     Por favor activa JavaScript para ver los <a href="http://disqus.com/?ref_noscript">comentarios accionados por Disqus.</a>
   </noscript>

  </body>
</html>